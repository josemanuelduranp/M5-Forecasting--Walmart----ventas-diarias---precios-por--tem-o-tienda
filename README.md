{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "84db3348-c9b7-4a90-b059-8502c360ee8a",
   "metadata": {},
   "source": [
    "### Elasticidad Precio‚ÄìDemanda y Optimizaci√≥n de Margen (M5 Forecasting / Walmart)\n",
    "Resumen del proyecto\n",
    "\n",
    "Este proyecto desarrolla un flujo pr√°ctico de estrategia de precios usando el dataset M5 Forecasting (Walmart): estimamos elasticidad precio‚Äìdemanda y, con esas elasticidades, \n",
    "simulamos escenarios de precio para recomendar ajustes que maximicen profit por categor√≠a y mercado.\n",
    "\n",
    "Idea central: la granularidad importa. A nivel SKU‚Äìtienda la elasticidad suele ser ruidosa e inestable; al agregar y hacer pooling se obtienen resultados m√°s accionables."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "3cf4be2f-16b4-4495-a46b-8b16575c124f",
   "metadata": {},
   "source": [
    "### Problema de negocio\n",
    "\n",
    "Un equipo de pricing quiere responder:\n",
    "\n",
    "1.-¬øQu√© tan sensible es la demanda a cambios de precio? (Elasticidad)\n",
    "\n",
    "2.-¬øConviene subir o bajar precios para maximizar profit?\n",
    "\n",
    "3.-¬øLa recomendaci√≥n cambia por mercado y categor√≠a?\n",
    "\n",
    "4.-¬øEl pricing puede ‚Äúarreglar‚Äù un problema de rentabilidad o hay temas estructurales (costos/mix)?\n",
    "\n",
    "Entregables del proyecto:\n",
    "\n",
    "    -Elasticidades con inferencia estad√≠stica\n",
    "    -Simulaci√≥n de unidades, revenue y profit por cambios de precio\n",
    "    -Recomendaci√≥n accionable ‚Äúsubir / bajar / mantener‚Äù por segmento"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "2f8425c4-f75b-4e37-b24d-6fa75f4b0b27",
   "metadata": {},
   "source": [
    "### Dataset\n",
    "\n",
    "Fuente: Kaggle_ M5 Forecasting dataset (Walmart).\n",
    "Archivos principales:\n",
    "\n",
    "    -sales_train_* (ventas diarias por item/tienda)\n",
    "    -sell_prices.csv (precios semanales por item/tienda/semana)\n",
    "    -calendar.csv (mapea d_# a fecha y wm_yr_wk)\n",
    "\n",
    "Enfoque multi-mercado: los stores/states se mapean a tres pa√≠ses (US/MX/ES) para simular un contexto de estrategia de precios internacional sin perder realismo."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "eb69eba6-95e9-41a1-80d8-719b0abbadb0",
   "metadata": {},
   "source": [
    "### Estructura del repositorio / notebooks\n",
    "\n",
    "01_data_loading_and_cleaning.ipynb\n",
    "\n",
    "-Carga, validaci√≥n de tipos, joins con calendario y precios, y creaci√≥n de tablas limpias cuidando performance.\n",
    "\n",
    "02_eda_sales_and_prices.ipynb\n",
    "\n",
    "-EDA de ventas y precios; comparaci√≥n por pa√≠s; validaci√≥n de cobertura de precios.\n",
    "\n",
    "03_price_elasticity_model.ipynb\n",
    "\n",
    "-Modelo log-log (OLS), filtros de calidad, agregaci√≥n semanal, pooling por segmento y errores robustos.\n",
    "\n",
    "04_margin_optimization.ipynb\n",
    "\n",
    "-Costos unitarios fijos por dept, baseline de profit, simulaci√≥n de escenarios y tabla ejecutiva de recomendaciones."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "9ff15f1d-8a6d-4312-b4ef-f536f340ab3d",
   "metadata": {},
   "source": [
    "### Metodolog√≠a\n",
    "1) Preparaci√≥n de datos (Notebook 01)\n",
    "\n",
    "Se construye una tabla modelable con:\n",
    "\n",
    "    -item_id, store_id, dept_id, country\n",
    "    -date, wm_yr_wk\n",
    "    -units_sold\n",
    "    -sell_price\n",
    "\n",
    "Nota de performance: evitamos ‚Äúmelt‚Äù masivo (muy pesado en laptop) cuando no es necesario, para prevenir crashes del kernel.\n",
    "\n",
    "2) Exploraci√≥n (Notebook 02)\n",
    "\n",
    "Validamos:\n",
    "\n",
    "    -cobertura de precios por semanas y mercados\n",
    "    -distribuci√≥n de precios por pa√≠s\n",
    "    -consistencia de joins sales ‚Üî calendar ‚Üî prices\n",
    "    -se√±ales para justificar agregaci√≥n semanal\n",
    "\n",
    "Resultado: el EDA motiva pasar de diario a semanal para estabilizar el modelado.\n",
    "\n",
    "3) Elasticidad (Notebook 03)\n",
    "\n",
    "Se intenta a nivel SKU‚Äìtienda y se observa inestabilidad; se pivotea a modelos agregados.\n",
    "\n",
    "Aprendizaje clave: a nivel SKU‚Äìtienda suele haber:\n",
    "\n",
    "    -ruido alto\n",
    "    -poca variaci√≥n de precio\n",
    "    -efectos no observados (promos/estacionalidad)\n",
    "\n",
    "4) Optimizaci√≥n de margen (Notebook 04)\n",
    "\n",
    "Con elasticidades estimadas:\n",
    "\n",
    "    -simulamos cambios de precio\n",
    "    -calculamos unidades, revenue, profit esperados\n",
    "    -elegimos el precio que maximiza profit por segmento"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "bd7f8442-3b1c-484c-a16f-ad150d46cc6f",
   "metadata": {},
   "source": [
    "### Modelos matem√°ticos \n",
    "A) Elasticidad log-log (OLS)\n",
    "\n",
    "Modelo est√°ndar de elasticidad constante:\n",
    "\n",
    "`log(Q) = Œ≤‚ÇÄ + Œ≤‚ÇÅ log(P) + Œ≤‚ÇÇ t + Œµ`\n",
    "\n",
    "\n",
    "    -Q: unidades vendidas\n",
    "    -P: precio\n",
    "    -ùë°:tendencia temporal (√≠ndice semanal)\n",
    "    -Œ≤1 : elasticidad precio‚Äìdemanda\n",
    "\n",
    "        -Ejemplo: ùõΩ1= ‚àí2 ‚Üí subir 1% el precio reduce ~2% la demanda.\n",
    "\n",
    "Se usan errores est√°ndar robustos HC3 para heterocedasticidad.\n",
    "\n",
    "B) Agregaci√≥n semanal\n",
    "\n",
    "    -Unidades: suma semanal\n",
    "    -Precio: promedio semanal\n",
    "\n",
    "C) Filtros de calidad (semanal)\n",
    "\n",
    "    -Para asegurar se√±al suficiente:\n",
    "        -MIN_WEEKS = 26\n",
    "        -MIN_UNIQUE_PRICES_W = 3\n",
    "\n",
    "D) Modelo pooled (categor√≠a √ó pa√≠s)\n",
    "\n",
    "    Pooling a nivel dept_id √ó country √ó week.\n",
    "\n",
    "Resultado pooled del run:\n",
    "\n",
    "    -Elasticidad pooled: ‚àí4.325\n",
    "    -p-value: ~8.9e‚àí55\n",
    "    -R¬≤: 0.268\n",
    "\n",
    "Interpretaci√≥n: en agregado, +1% precio ‚Üí ~‚àí4.3% unidades (con evidencia fuerte).\n",
    "\n",
    "E) Simulaci√≥n de demanda con elasticidad\n",
    "\n",
    "    `Q_new = Q_base √ó (P_new / P_base)^Œµ`\n",
    "\n",
    "F) Profit\n",
    "\n",
    "    `Profit = Q √ó (P ‚àí C)`\n",
    "\n",
    "con ùê∂ costo unitario fijo por dept en esta versi√≥n."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "258aa708-26cf-44f4-abf0-64d3a4593bca",
   "metadata": {},
   "source": [
    "### Resultados clave (del run)\n",
    "Elasticidades por segmento (dept √ó pa√≠s)\n",
    "\n",
    "Ejemplos:\n",
    "\n",
    "    -FOODS_3 (US): elasticidad ‚âà ‚àí8.50 (muy sensible al precio)\n",
    "    -Otros segmentos muestran elasticidades d√©biles o inestables (com√∫n en retail).\n",
    "\n",
    "Recomendaciones √≥ptimas (costos fijos por dept)\n",
    "\n",
    "Costos unitarios usados:\n",
    "\n",
    "    -FOODS_3: 1.80\n",
    "    -HOBBIES_1: 6.50\n",
    "\n",
    "Hallazgos:\n",
    "\n",
    "    -FOODS_3 (US): bajar precio 10% maximiza profit (gran mejora vs baseline).\n",
    "    -FOODS_3 (MX/ES): subir precio 10% mejora profit por captura de margen.\n",
    "    -HOBBIES_1: profit sigue negativo en todos los escenarios; subir precio reduce p√©rdidas pero no vuelve rentable.\n",
    "\n",
    "Conclusi√≥n de negocio:\n",
    "FOODS tiene oportunidades claras de pricing diferenciado por mercado; HOBBIES sugiere problema estructural (costos/mix/demanda), no resoluble solo con precio."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "f972b41e-9c7e-4a0d-a6a1-18cc43f0ce08",
   "metadata": {},
   "source": [
    "### Limitaciones y supuestos\n",
    "\n",
    "-Elasticidad no causal (datos observacionales; promos/competencia no modeladas por completo).\n",
    "\n",
    "-Supuesto de elasticidad constante.\n",
    "\n",
    "-Costos fijos por dept (simplificaci√≥n).\n",
    "\n",
    "-No se modela expl√≠citamente:\n",
    "\n",
    "    -promociones como driver separado\n",
    "    -competencia\n",
    "    -sustituci√≥n, inventario, marketing\n",
    "    -En segmentos con poca variaci√≥n de precio, la elasticidad puede ser inestable."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "49b6a4ba-d511-49bb-9eb9-9dbdf9af84c9",
   "metadata": {},
   "source": [
    "### Limitaciones y supuestos\n",
    "\n",
    "    -Elasticidad no causal (datos observacionales; promos/competencia no modeladas por completo).\n",
    "    -Supuesto de elasticidad constante.\n",
    "    -Costos fijos por dept (simplificaci√≥n).\n",
    "    -No se modela expl√≠citamente:\n",
    "        -promociones como driver separado\n",
    "        -competencia\n",
    "        -sustituci√≥n, inventario, marketing\n",
    "    -En segmentos con poca variaci√≥n de precio, la elasticidad puede ser inestable."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "d5335555-11b9-4297-969d-8c2efef65ab0",
   "metadata": {},
   "source": [
    "### Tech stack\n",
    "\n",
    "-Python 3.x (Anaconda)\n",
    "\n",
    "-Jupyter Notebook\n",
    "\n",
    "Librer√≠as:\n",
    "\n",
    "-pandas, numpy\n",
    "-statsmodels (OLS + HC3)\n",
    "-matplotlib\n",
    "\n",
    "(Opcional futuro):\n",
    "\n",
    "-scikit-learn (Ridge/Lasso)"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "a4a36e20-2c45-4060-a6d9-ad007b870cc8",
   "metadata": {},
   "source": [
    "### C√≥mo correr el proyecto\n",
    "\n",
    "Descarga el dataset M5 de Kaggle y col√≥calo en data/.\n",
    "\n",
    "Crea/activa tu entorno (Anaconda recomendado).\n",
    "\n",
    "Ejecuta los notebooks en orden:\n",
    "\n",
    "    -01 ‚Üí 02 ‚Üí 03 ‚Üí 04\n",
    "\n",
    "Estructura sugerida:\n",
    "\n",
    "project/\n",
    "  data/\n",
    "    calendar.csv\n",
    "    sell_prices.csv\n",
    "    sales_train_validation.csv\n",
    "  notebooks/\n",
    "    01_data_loading_and_cleaning.ipynb\n",
    "    02_eda_sales_and_prices.ipynb\n",
    "    03_price_elasticity_model.ipynb\n",
    "    04_margin_optimization.ipynb\n",
    "  README_ES.md\n"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "9a71c5e0-7928-48a9-8509-57c8a924cddf",
   "metadata": {},
   "source": [
    "### ¬øQu√© har√≠a despu√©s?...\n",
    "\n",
    "1.-Elasticidad con enfoque causal / cuasi-causal\n",
    "\n",
    "    -Agregar variables de promos/holiday y controles; explorar m√©todos tipo diff-in-diff o instrumentos.\n",
    "\n",
    "2.- Modelos regularizados / jer√°rquicos\n",
    "\n",
    "    -Ridge/Lasso o partial pooling para estabilizar elasticidad a nivel SKU.\n",
    "\n",
    "3.-Elasticidad no constante\n",
    "\n",
    "    -Modelos por tramos (price bands) o splines.\n",
    "\n",
    "4.- Costos m√°s realistas\n",
    "\n",
    "    -Costos por item, log√≠stica, constraints de margen; an√°lisis de sensibilidad de costos.\n",
    "\n",
    "5.-Soporte a decisiones\n",
    "\n",
    "    -Dashboard ligero y un playbook de pricing por categor√≠a/mercado."
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "anaconda-2025.12-py312",
   "language": "python",
   "name": "conda-env-anaconda-2025.12-py312-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
